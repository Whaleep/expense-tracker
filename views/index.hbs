<div class="container d-flex flex-column align-items-end col-md-9">
  <div class="container d-flex flex-column col-sm-8">

    <form action="/" method="GET" class="filter">
      <select class="form-select" name="month" id="month-filter" data-value="{{month}}" aria-label="month select">
        <option value="" selected>全部月份</option>
        {{#each months}}
        <option>{{this._id}}</option>
        {{/each}}
      </select>
      {{!-- <input type="month" class="form-control" name="month" id="month-filter" value="{{month}}" required> --}}

      <select class="form-select" name="category" id="category-filter" data-value="{{category}}" aria-label="category select">
        <option value="" selected>全部類別</option>
        {{#each categories}}
        <option value="{{this._id}}">{{this.title}}</option>
        {{/each}}
      </select>
    </form>

    <div class="d-flex justify-content-evenly my-3">
      <div>總金額：</div>
      <div class="total-amount">{{totalAmount}}</div>
    </div>
  </div>

  <div class="container list-group" id="data-panel">

    {{#each records}}
    <div class="row">
      <div class="col col-auto btn-category">
          <i class="fas {{this.category.icon}} category-icon" data-category="{{this.category._id}}"></i>
      </div>
      <div class="col">
        <div>{{this.name}}</div>
        <div class="fs-7">{{toDate this.date}} {{this.merchant}}</div>
      </div>
      <div class="col col-auto text-end">{{this.amount}}</div>
      <div class="col col-auto">
        <a href="/records/{{this._id}}/edit" class="btn btn-outline-secondary">修改</a>
      </div>
      <div class="col col-auto">
        <button type="button" class="btn btn-outline-danger btn-delete" data-id="{{this._id}}" data-info="{{toDate this.date}} {{this.name}}" data-bs-toggle="modal" data-bs-target="#deleteModal">刪除</button>
      </div>
    </div>
    {{/each}}

    <div class="container col-md-9 my-3">
      <a href="/records/new">
        <button type="button" class="col-5 btn bg-orange text-white">新增支出</button>
      </a>
    </div>

  </div>
</div>

<!-- Modal -->
<div class="modal fade" id="deleteModal" tabindex="-1" aria-labelledby="deleteModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">刪除記錄</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body" id="delete-modal-body">
        確定要刪除嗎？
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">關閉</button>
        <form action="" method="post" id="delete-form">
          <button type="submit" class="btn btn-outline-danger">刪除</button>
        </form>
      </div>
    </div>
  </div>
</div>

<script src="/javascripts/index.js"></script>